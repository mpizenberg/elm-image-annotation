<div id="main"></div>
<script src="main.js"></script>
<script>
	const app = Elm.Main.fullscreen();

	app.ports.chooseImage.subscribe( (name) => {
		const src = name + ".jpg"
		const image = new Image()
		image.onload = () => {
			const width = image.naturalWidth
			const height = image.naturalHeight
			app.ports.imageFetched.send([name, src, [width, height]])
		}
		image.src = src
	})

	app.ports.fetchGroundtruth.subscribe( (name) => {
		const src = name + ".json"
		const request = new XMLHttpRequest()
		request.onload = () => {
			app.ports.groundtruthFetched.send([name, request.response])
		}
		request.open("GET", src)
		request.send(null)
	})

	app.ports.displayGroundtruth.subscribe( ([id, gt]) => {
		window.requestAnimationFrame( () => {
			console.log(id)
			const svgImg = document.getElementById(id)
			svgImg.textContent = "Bouya!"
		})})
</script>
